{% extends "base.html" %}

{% block title %}My Profile - Litigation Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">My Profile</h1>
        <p class="page-subtitle">Manage your account settings</p>
    </div>
</div>

<div class="dashboard-grid">
    <!-- User Info -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">üë§ Account Information</h3>
        </div>
        
        <div class="info-grid">
            <div class="info-item">
                <div class="info-label">Full Name</div>
                <div class="info-value">{{ user.full_name }}</div>
            </div>
            <div class="info-item">
                <div class="info-label">Username</div>
                <div class="info-value"><code style="color: var(--accent-primary);">{{ user.username }}</code></div>
            </div>
            <div class="info-item">
                <div class="info-label">Email</div>
                <div class="info-value">{{ user.email }}</div>
            </div>
            <div class="info-item">
                <div class="info-label">Role</div>
                <div class="info-value"><span class="badge badge-{{ user.role }}">{{ user.role|upper }}</span></div>
            </div>
            <div class="info-item">
                <div class="info-label">Member Since</div>
                <div class="info-value">{{ user.created_at.strftime('%d %B %Y') }}</div>
            </div>
        </div>
    </div>
    
    <!-- Change Password -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">üîê Change Password</h3>
        </div>
        
        {% if error %}
        <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: var(--radius-md); padding: 12px 16px; margin-bottom: 20px; color: var(--accent-danger);">
            ‚ö†Ô∏è {{ error }}
        </div>
        {% endif %}
        
        {% if success %}
        <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: var(--radius-md); padding: 12px 16px; margin-bottom: 20px; color: var(--accent-success);">
            ‚úÖ {{ success }}
        </div>
        {% endif %}
        
        <form method="POST" action="/profile/change-password">
            <div class="form-group">
                <label class="form-label" for="current_password">Current Password *</label>
                <input type="password" id="current_password" name="current_password" class="form-input" 
                       placeholder="Enter your current password" required>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="new_password">New Password *</label>
                <input type="password" id="new_password" name="new_password" class="form-input" 
                       placeholder="Enter new password (min. 6 characters)" required minlength="6">
            </div>
            
            <div class="form-group">
                <label class="form-label" for="confirm_password">Confirm New Password *</label>
                <input type="password" id="confirm_password" name="confirm_password" class="form-input" 
                       placeholder="Confirm new password" required minlength="6">
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 100%;">
                üîí Change Password
            </button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.querySelector('form').addEventListener('submit', function(e) {
    const newPass = document.getElementById('new_password').value;
    const confirmPass = document.getElementById('confirm_password').value;
    
    if (newPass !== confirmPass) {
        e.preventDefault();
        alert('New passwords do not match!');
        return false;
    }
    
    if (newPass.length < 6) {
        e.preventDefault();
        alert('Password must be at least 6 characters!');
        return false;
    }
});
</script>
{% endblock %}

